
. use NHIS2009_clean, clear

. . `4ee81f354e83d557389398bb21f35af7'
. include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. . `cc64df03024327541235dabb93f09e00'
. _StataKernelLog off

. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. keep if marradult==1 & perweight!=0 
(50,662 observations deleted)

.   by serial: egen hi_hsb = mean(hi_hsb1)
(207 missing values generated)

.    keep if hi_hsb!=. & hi!=.
(207 observations deleted)

.   by serial: egen female = total(fml)

.    keep if female==1
(31 observations deleted)

.    drop female

. . include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. gen angrist = ( age>=26 & age<=59 & marradult==1 & adltempl>=1 )

.   keep if angrist==1
(9,613 observations deleted)

.  by serial: gen n = _N

.   keep if n>1
(1,331 observations deleted)

. . include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. matrix results = J(15,6,.)

.  matrix rownames results = "Health index" "se" "Nonwhite" "se" "Age" "se" "Edu
> cation" "se" "Family Size" "se" "Employed" "se" "Family income" "se" "Sample s
> ize"

.  matrix colnames results = "Husbands: Some HI" "Husbands: No HI" "Husbands: Di
> fference" "Wives: Some HI" "Wives: No HI" "Wives: Difference" 

.  matrix list results,format(%8.4f)

results[15,6]
                Husbands:   Husbands:   Husbands:      Wives:      Wives:
                 Some HI       No HI  Difference     Some HI       No HI
Health index           .           .           .           .           .
          se           .           .           .           .           .
    Nonwhite           .           .           .           .           .
          se           .           .           .           .           .
         Age           .           .           .           .           .
          se           .           .           .           .           .
   Education           .           .           .           .           .
          se           .           .           .           .           .
 Family Size           .           .           .           .           .
          se           .           .           .           .           .
    Employed           .           .           .           .           .
          se           .           .           .           .           .
Family inc~e           .           .           .           .           .
          se           .           .           .           .           .
 Sample size           .           .           .           .           .

                   Wives:
              Difference
Health index           .
          se           .
    Nonwhite           .
          se           .
         Age           .
          se           .
   Education           .
          se           .
 Family Size           .
          se           .
    Employed           .
          se           .
Family inc~e           .
          se           .
 Sample size           .

.  local col = 1

.  local row1 = 1

.  local row2 = 2

. . include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. forval fem = 0/1 {
  2.  qui sum hlth if hi==1 & fml==`fem' [ aw=perweight ]
  3.   mat results[`row1',`col'] = r(mean)
  4.   mat results[`row2',`col'] = r(sd)
  5.   local ++col
  6.  qui sum hlth if hi==0 & fml==`fem' [ aw=perweight ]
  7.   mat results[`row1',`col'] = r(mean)
  8.   mat results[`row2',`col'] = r(sd)
  9.   local ++col
 10.  reg hlth hi if fml==`fem' [ aw=perweight ], robust
 11.   mat results[`row1',`col'] = _b[hi]
 12.   mat results[`row2',`col'] = _se[hi]
 13.   local ++col
 14.  }
(sum of wgt is 34,118,563)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =      84.68
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0129
                                                Root MSE          =      .9406

------------------------------------------------------------------------------
             |               Robust
        hlth |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   .3132452   .0340396     9.20   0.000     .2465202    .3799702
       _cons |   3.695654   .0316859   116.63   0.000     3.633543    3.757765
------------------------------------------------------------------------------
(sum of wgt is 32,513,646)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =     125.33
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0186
                                                Root MSE          =      .9314

------------------------------------------------------------------------------
             |               Robust
        hlth |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   .3943197   .0352229    11.19   0.000     .3252752    .4633642
       _cons |   3.623059   .0330162   109.74   0.000      3.55834    3.687778
------------------------------------------------------------------------------

.   local row1 = `row1' + 2

.   local row2 = `row2' + 2

. . include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. forval fem = 0/1 {
  2.  qui sum hlth if hi==1 & fml==`fem' [ aw=perweight ]
  3.   mat results[`row1',`col'] = r(mean)
  4.   mat results[`row2',`col'] = r(sd)
  5.   local ++col
  6.  qui sum hlth if hi==0 & fml==`fem' [ aw=perweight ]
  7.   mat results[`row1',`col'] = r(mean)
  8.   mat results[`row2',`col'] = r(sd)
  9.   local ++col
 10.  reg hlth hi if fml==`fem' [ aw=perweight ], robust
 11.   mat results[`row1',`col'] = _b[hi]
 12.   mat results[`row2',`col'] = _se[hi]
 13.   local ++col
 14.  }
conformability error
r(503);
r(503);

. include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. matrix results = J(15,6,.)

.  matrix rownames results = "Health index" "se" "Nonwhite" "se" "Age" "se" "Edu
> cation" "se" "Family Size" "se" "Employed" "se" "Family income" "se" "Sample s
> ize"

.  matrix colnames results = "Husbands: Some HI" "Husbands: No HI" "Husbands: Di
> fference" "Wives: Some HI" "Wives: No HI" "Wives: Difference" 

.  matrix list results,format(%8.4f)

results[15,6]
                Husbands:   Husbands:   Husbands:      Wives:      Wives:
                 Some HI       No HI  Difference     Some HI       No HI
Health index           .           .           .           .           .
          se           .           .           .           .           .
    Nonwhite           .           .           .           .           .
          se           .           .           .           .           .
         Age           .           .           .           .           .
          se           .           .           .           .           .
   Education           .           .           .           .           .
          se           .           .           .           .           .
 Family Size           .           .           .           .           .
          se           .           .           .           .           .
    Employed           .           .           .           .           .
          se           .           .           .           .           .
Family inc~e           .           .           .           .           .
          se           .           .           .           .           .
 Sample size           .           .           .           .           .

                   Wives:
              Difference
Health index           .
          se           .
    Nonwhite           .
          se           .
         Age           .
          se           .
   Education           .
          se           .
 Family Size           .
          se           .
    Employed           .
          se           .
Family inc~e           .
          se           .
 Sample size           .

.  local col = 1

.  local row1 = 1

.  local row2 = 2

. . include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. forval fem = 0/1 {
  2.  qui sum hlth if hi==1 & fml==`fem' [ aw=perweight ]
  3.   mat results[`row1',`col'] = r(mean)
  4.   mat results[`row2',`col'] = r(sd)
  5.   local ++col
  6.  qui sum hlth if hi==0 & fml==`fem' [ aw=perweight ]
  7.   mat results[`row1',`col'] = r(mean)
  8.   mat results[`row2',`col'] = r(sd)
  9.   local ++col
 10.  reg hlth hi if fml==`fem' [ aw=perweight ], robust
 11.   mat results[`row1',`col'] = _b[hi]
 12.   mat results[`row2',`col'] = _se[hi]
 13.   local ++col
 14.  }
(sum of wgt is 34,118,563)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =      84.68
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0129
                                                Root MSE          =      .9406

------------------------------------------------------------------------------
             |               Robust
        hlth |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   .3132452   .0340396     9.20   0.000     .2465202    .3799702
       _cons |   3.695654   .0316859   116.63   0.000     3.633543    3.757765
------------------------------------------------------------------------------
(sum of wgt is 32,513,646)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =     125.33
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0186
                                                Root MSE          =      .9314

------------------------------------------------------------------------------
             |               Robust
        hlth |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   .3943197   .0352229    11.19   0.000     .3252752    .4633642
       _cons |   3.623059   .0330162   109.74   0.000      3.55834    3.687778
------------------------------------------------------------------------------

.   local row1 = `row1' + 2

.   local row2 = `row2' + 2

. . include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. matrix results = J(15,6,.)

.  matrix rownames results = "Health index" "se" "Nonwhite" "se" "Age" "se" "Edu
> cation" "se" "Family Size" "se" "Employed" "se" "Family income" "se" "Sample s
> ize"

.  matrix colnames results = "Husbands: Some HI" "Husbands: No HI" "Husbands: Di
> fference" "Wives: Some HI" "Wives: No HI" "Wives: Difference" 

.  matrix list results,format(%8.4f)

results[15,6]
                Husbands:   Husbands:   Husbands:      Wives:      Wives:
                 Some HI       No HI  Difference     Some HI       No HI
Health index           .           .           .           .           .
          se           .           .           .           .           .
    Nonwhite           .           .           .           .           .
          se           .           .           .           .           .
         Age           .           .           .           .           .
          se           .           .           .           .           .
   Education           .           .           .           .           .
          se           .           .           .           .           .
 Family Size           .           .           .           .           .
          se           .           .           .           .           .
    Employed           .           .           .           .           .
          se           .           .           .           .           .
Family inc~e           .           .           .           .           .
          se           .           .           .           .           .
 Sample size           .           .           .           .           .

                   Wives:
              Difference
Health index           .
          se           .
    Nonwhite           .
          se           .
         Age           .
          se           .
   Education           .
          se           .
 Family Size           .
          se           .
    Employed           .
          se           .
Family inc~e           .
          se           .
 Sample size           .

.  local col = 1

.  local row1 = 1

.  local row2 = 2

.  forval fem = 0/1 {
  2.  qui sum hlth if hi==1 & fml==`fem' [ aw=perweight ]
  3.   mat results[`row1',`col'] = r(mean)
  4.   mat results[`row2',`col'] = r(sd)
  5.   local ++col
  6.  qui sum hlth if hi==0 & fml==`fem' [ aw=perweight ]
  7.   mat results[`row1',`col'] = r(mean)
  8.   mat results[`row2',`col'] = r(sd)
  9.   local ++col
 10.  reg hlth hi if fml==`fem' [ aw=perweight ], robust
 11.   mat results[`row1',`col'] = _b[hi]
 12.   mat results[`row2',`col'] = _se[hi]
 13.   local ++col
 14.  }
(sum of wgt is 34,118,563)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =      84.68
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0129
                                                Root MSE          =      .9406

------------------------------------------------------------------------------
             |               Robust
        hlth |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   .3132452   .0340396     9.20   0.000     .2465202    .3799702
       _cons |   3.695654   .0316859   116.63   0.000     3.633543    3.757765
------------------------------------------------------------------------------
(sum of wgt is 32,513,646)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =     125.33
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0186
                                                Root MSE          =      .9314

------------------------------------------------------------------------------
             |               Robust
        hlth |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   .3943197   .0352229    11.19   0.000     .3252752    .4633642
       _cons |   3.623059   .0330162   109.74   0.000      3.55834    3.687778
------------------------------------------------------------------------------

.   local row1 = `row1' + 2

.   local row2 = `row2' + 2

. . include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. foreach var in nwhite age yedu famsize empl inc {
  2.   local col = 1
  3.   forval fem = 0/1 {
  4.    qui sum `var' if hi==1 & fml==`fem' [ aw=perweight ]
  5.     mat results[`row1',`col'] = r(mean)
  6.     local ++col
  7.    qui sum `var' if hi==0 & fml==`fem' [ aw=perweight ]
  8.     mat results[`row1',`col'] = r(mean)
  9.     local ++col
 10.    reg `var' hi if fml==`fem' [ w=perweight ], robust
 11.     mat results[`row1',`col'] = _b[hi]
 12.     mat results[`row2',`col'] = _se[hi]
 13.     local ++col
 14.   }  
 15.   local row1 = `row1' + 2
 16.   local row2 = `row2' + 2
 17.  }
(analytic weights assumed)
(sum of wgt is 34,118,563)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =       1.01
                                                Prob > F          =     0.3144
                                                R-squared         =     0.0001
                                                Root MSE          =     .36602

------------------------------------------------------------------------------
             |               Robust
      nwhite |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |  -.0115948   .0115249    -1.01   0.314     -.034186    .0109965
       _cons |   .1693667   .0106274    15.94   0.000     .1485347    .1901986
------------------------------------------------------------------------------
(analytic weights assumed)
(sum of wgt is 32,513,646)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =       3.63
                                                Prob > F          =     0.0569
                                                R-squared         =     0.0005
                                                Root MSE          =     .36063

------------------------------------------------------------------------------
             |               Robust
      nwhite |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |  -.0239163   .0125603    -1.90   0.057    -.0485371    .0007046
       _cons |   .1747474    .011823    14.78   0.000     .1515716    .1979231
------------------------------------------------------------------------------
(analytic weights assumed)
(sum of wgt is 34,118,563)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =      86.70
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0114
                                                Root MSE          =      8.661

------------------------------------------------------------------------------
             |               Robust
         age |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   2.713743   .2914405     9.31   0.000     2.142457    3.285029
       _cons |   41.26318   .2671254   154.47   0.000     40.73956    41.78681
------------------------------------------------------------------------------
(analytic weights assumed)
(sum of wgt is 32,513,646)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =      75.56
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0094
                                                Root MSE          =     8.7488

------------------------------------------------------------------------------
             |               Robust
         age |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   2.619479   .3013479     8.69   0.000     2.028772    3.210186
       _cons |   39.61744   .2768904   143.08   0.000     39.07467     40.1602
------------------------------------------------------------------------------
(analytic weights assumed)
(sum of wgt is 34,118,563)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =     729.63
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1129
                                                Root MSE          =       2.64

------------------------------------------------------------------------------
             |               Robust
        yedu |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   2.743283   .1015592    27.01   0.000     2.544205    2.942361
       _cons |   11.56244   .0962655   120.11   0.000     11.37374    11.75115
------------------------------------------------------------------------------
(analytic weights assumed)
(sum of wgt is 32,513,646)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =     609.62
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1030
                                                Root MSE          =     2.5386

------------------------------------------------------------------------------
             |               Robust
        yedu |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   2.642903   .1070412    24.69   0.000     2.433079    2.852727
       _cons |   11.79908   .1026488   114.95   0.000     11.59787    12.00029
------------------------------------------------------------------------------
(analytic weights assumed)
(sum of wgt is 34,118,563)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =      81.36
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0147
                                                Root MSE          =     1.3262

------------------------------------------------------------------------------
             |               Robust
     famsize |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |  -.4721901   .0523507    -9.02   0.000    -.5748089   -.3695713
       _cons |   3.976924   .0494789    80.38   0.000     3.879934    4.073913
------------------------------------------------------------------------------
(analytic weights assumed)
(sum of wgt is 32,513,646)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =      65.13
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0112
                                                Root MSE          =     1.3215

------------------------------------------------------------------------------
             |               Robust
     famsize |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   -.432758   .0536228    -8.07   0.000    -.5378704   -.3276457
       _cons |   3.926348   .0507972    77.29   0.000     3.826775    4.025922
------------------------------------------------------------------------------
(analytic weights assumed)
(sum of wgt is 34,118,563)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =      40.01
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0084
                                                Root MSE          =     .27911

------------------------------------------------------------------------------
             |               Robust
        empl |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   .0748071   .0118272     6.33   0.000     .0516233     .097991
       _cons |    .849466   .0112809    75.30   0.000     .8273529    .8715791
------------------------------------------------------------------------------
(analytic weights assumed)
(sum of wgt is 32,513,646)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =     151.32
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0238
                                                Root MSE          =      .4332

------------------------------------------------------------------------------
             |               Robust
        empl |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   .2076896   .0168834    12.30   0.000     .1745945    .2407848
       _cons |   .5577617   .0159292    35.01   0.000     .5265369    .5889864
------------------------------------------------------------------------------
(analytic weights assumed)
(sum of wgt is 34,118,563)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =    2011.74
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1380
                                                Root MSE          =      52163

------------------------------------------------------------------------------
             |               Robust
         inc |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   60810.44   1355.789    44.85   0.000      58152.8    63468.08
       _cons |   45656.25   1149.919    39.70   0.000     43402.16    47910.34
------------------------------------------------------------------------------
(analytic weights assumed)
(sum of wgt is 32,513,646)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =    1810.42
                                                Prob > F          =     0.0000
                                                R-squared         =     0.1207
                                                Root MSE          =      52556

------------------------------------------------------------------------------
             |               Robust
         inc |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |    59827.5   1406.084    42.55   0.000     57071.27    62583.73
       _cons |    46384.7     1208.8    38.37   0.000     44015.19    48754.21
------------------------------------------------------------------------------

. . include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. matrix results = J(15,6,.)

.  matrix rownames results = "Health index" "se" "Nonwhite" "se" "Age" "se" "Edu
> cation" "se" "Family Size" "se" "Employed" "se" "Family income" "se" "Sample s
> ize"

.  matrix colnames results = "Husbands: Some HI" "Husbands: No HI" "Husbands: Di
> fference" "Wives: Some HI" "Wives: No HI" "Wives: Difference" 

.  matrix list results,format(%8.4f)

results[15,6]
                Husbands:   Husbands:   Husbands:      Wives:      Wives:
                 Some HI       No HI  Difference     Some HI       No HI
Health index           .           .           .           .           .
          se           .           .           .           .           .
    Nonwhite           .           .           .           .           .
          se           .           .           .           .           .
         Age           .           .           .           .           .
          se           .           .           .           .           .
   Education           .           .           .           .           .
          se           .           .           .           .           .
 Family Size           .           .           .           .           .
          se           .           .           .           .           .
    Employed           .           .           .           .           .
          se           .           .           .           .           .
Family inc~e           .           .           .           .           .
          se           .           .           .           .           .
 Sample size           .           .           .           .           .

                   Wives:
              Difference
Health index           .
          se           .
    Nonwhite           .
          se           .
         Age           .
          se           .
   Education           .
          se           .
 Family Size           .
          se           .
    Employed           .
          se           .
Family inc~e           .
          se           .
 Sample size           .

.  local col = 1

.  local row1 = 1

.  local row2 = 2

. . include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. forval fem = 0/1 {
  2.  qui sum hlth if hi==1 & fml==`fem' [ aw=perweight ]
  3.   mat results[`row1',`col'] = r(mean)
  4.   mat results[`row2',`col'] = r(sd)
  5.   local ++col
  6.  qui sum hlth if hi==0 & fml==`fem' [ aw=perweight ]
  7.   mat results[`row1',`col'] = r(mean)
  8.   mat results[`row2',`col'] = r(sd)
  9.   local ++col
 10.  reg hlth hi if fml==`fem' [ aw=perweight ], robust
 11.   mat results[`row1',`col'] = _b[hi]
 12.   mat results[`row2',`col'] = _se[hi]
 13.   local ++col
 14.  }
(sum of wgt is 34,118,563)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =      84.68
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0129
                                                Root MSE          =      .9406

------------------------------------------------------------------------------
             |               Robust
        hlth |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   .3132452   .0340396     9.20   0.000     .2465202    .3799702
       _cons |   3.695654   .0316859   116.63   0.000     3.633543    3.757765
------------------------------------------------------------------------------
(sum of wgt is 32,513,646)

Linear regression                               Number of obs     =      9,395
                                                F(1, 9393)        =     125.33
                                                Prob > F          =     0.0000
                                                R-squared         =     0.0186
                                                Root MSE          =      .9314

------------------------------------------------------------------------------
             |               Robust
        hlth |      Coef.   Std. Err.      t    P>|t|     [95% Conf. Interval]
-------------+----------------------------------------------------------------
          hi |   .3943197   .0352229    11.19   0.000     .3252752    .4633642
       _cons |   3.623059   .0330162   109.74   0.000      3.55834    3.687778
------------------------------------------------------------------------------

.   local row1 = `row1' + 2

.   local row2 = `row2' + 2

. . include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. tab hi if fml == 0 [aw=perweight], matcell(x)

         hi |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 1,281.4929       13.64       13.64
          1 | 8,113.5071       86.36      100.00
------------+-----------------------------------
      Total |      9,395      100.00

.  mat list x

x[2,1]
           c1
r1  1281.4929
r2  8113.5071

.  mat results[`row1',2] = x[1,1]

.  mat results[`row1',1] = x[2,1]

.  tab hi if fml == 1 [aw=perweight], matcell(y)

         hi |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 | 1,131.3788       12.04       12.04
          1 | 8,263.6212       87.96      100.00
------------+-----------------------------------
      Total |      9,395      100.00

.  mat list y

y[2,1]
           c1
r1  1131.3788
r2  8263.6212

.  mat results[`row1',5] = y[1,1]

.  mat results[`row1',4] = y[2,1]

. . include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . matrix list results, format(%8.2f)

results[15,6]
                Husbands:   Husbands:   Husbands:      Wives:      Wives:
                 Some HI       No HI  Difference     Some HI       No HI
Health index        4.01        3.70        0.31        4.02        3.62
          se        0.93        1.01        0.03        0.92        1.01
    Nonwhite     8113.51     1281.49           .     8263.62     1131.38
          se           .           .           .           .           .
         Age           .           .           .           .           .
          se           .           .           .           .           .
   Education           .           .           .           .           .
          se           .           .           .           .           .
 Family Size           .           .           .           .           .
          se           .           .           .           .           .
    Employed           .           .           .           .           .
          se           .           .           .           .           .
Family inc~e           .           .           .           .           .
          se           .           .           .           .           .
 Sample size           .           .           .           .           .

                   Wives:
              Difference
Health index        0.39
          se        0.04
    Nonwhite           .
          se           .
         Age           .
          se           .
   Education           .
          se           .
 Family Size           .
          se           .
    Employed           .
          se           .
Family inc~e           .
          se           .
 Sample size           .

. include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . matrix list results, format(%8.2f)

results[15,6]
                Husbands:   Husbands:   Husbands:      Wives:      Wives:
                 Some HI       No HI  Difference     Some HI       No HI
Health index        4.01        3.70        0.31        4.02        3.62
          se        0.93        1.01        0.03        0.92        1.01
    Nonwhite     8113.51     1281.49           .     8263.62     1131.38
          se           .           .           .           .           .
         Age           .           .           .           .           .
          se           .           .           .           .           .
   Education           .           .           .           .           .
          se           .           .           .           .           .
 Family Size           .           .           .           .           .
          se           .           .           .           .           .
    Employed           .           .           .           .           .
          se           .           .           .           .           .
Family inc~e           .           .           .           .           .
          se           .           .           .           .           .
 Sample size           .           .           .           .           .

                   Wives:
              Difference
Health index        0.39
          se        0.04
    Nonwhite           .
          se           .
         Age           .
          se           .
   Education           .
          se           .
 Family Size           .
          se           .
    Employed           .
          se           .
Family inc~e           .
          se           .
 Sample size           .

. include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . matrix list results, format(%5.2f)

results[15,6]
                Husbands:   Husbands:   Husbands:      Wives:      Wives:
                 Some HI       No HI  Difference     Some HI       No HI
Health index        4.01        3.70        0.31        4.02        3.62
          se        0.93        1.01        0.03        0.92        1.01
    Nonwhite     8113.51     1281.49           .     8263.62     1131.38
          se           .           .           .           .           .
         Age           .           .           .           .           .
          se           .           .           .           .           .
   Education           .           .           .           .           .
          se           .           .           .           .           .
 Family Size           .           .           .           .           .
          se           .           .           .           .           .
    Employed           .           .           .           .           .
          se           .           .           .           .           .
Family inc~e           .           .           .           .           .
          se           .           .           .           .           .
 Sample size           .           .           .           .           .

                   Wives:
              Difference
Health index        0.39
          se        0.04
    Nonwhite           .
          se           .
         Age           .
          se           .
   Education           .
          se           .
 Family Size           .
          se           .
    Employed           .
          se           .
Family inc~e           .
          se           .
 Sample size           .

. include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . matrix list results, format(%1.2f)
'%1.2f' found where numeric format expected
r(7);

. include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . matrix list results, format(%2.2f)
'%2.2f' found where numeric format expected
r(7);

. include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . matrix list results, format(%8.2f)

results[15,6]
                Husbands:   Husbands:   Husbands:      Wives:      Wives:
                 Some HI       No HI  Difference     Some HI       No HI
Health index        4.01        3.70        0.31        4.02        3.62
          se        0.93        1.01        0.03        0.92        1.01
    Nonwhite     8113.51     1281.49           .     8263.62     1131.38
          se           .           .           .           .           .
         Age           .           .           .           .           .
          se           .           .           .           .           .
   Education           .           .           .           .           .
          se           .           .           .           .           .
 Family Size           .           .           .           .           .
          se           .           .           .           .           .
    Employed           .           .           .           .           .
          se           .           .           .           .           .
Family inc~e           .           .           .           .           .
          se           .           .           .           .           .
 Sample size           .           .           .           .           .

                   Wives:
              Difference
Health index        0.39
          se        0.04
    Nonwhite           .
          se           .
         Age           .
          se           .
   Education           .
          se           .
 Family Size           .
          se           .
    Employed           .
          se           .
Family inc~e           .
          se           .
 Sample size           .

. include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. putexcel set MM_Table1_1, replace
Note: file will be replaced when the first putexcel command is issued

. putexcel A1 = matrix(results), names nformat(number_d2)
file MM_Table1_1.xlsx saved

. . include /Users/datalab/.stata_kernel_cache/include.do

. tempname __user_rc

. local `__user_rc' = _rc

. 
. include /Users/datalab/.stata_kernel_cache/include.do

. _StataKernelResetRC, num(``__user_rc'')

. macro drop _`__user_rc'

. macro drop ___user_rc

. . include /Users/datalab/.stata_kernel_cache/include.do

. cap log close
